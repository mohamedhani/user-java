name: test
run-name: test ${{ github.actor }}
on:
    push:
        branches:
        - feature/**
    pull_request:
        branches:
            - feature/**  
jobs:
    unit-test:
        name: Unit Test
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v4
        - name: Setup JDK
          uses: actions/setup-java@v3
          with:
            distribution: 'corretto' # See 'Supported distributions' for available options
            java-version: '16'
        - name: Setup Maven Action
          uses: stCarolas/setup-maven@v4.5
          with:
            maven-version: 3.8.2
        - name: Restore local Maven repository
          uses: actions/cache@v3
          id: restore-cache
          with:
            path: ~/.m2/repository
            key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
            restore-keys: |
                ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
                ${{ runner.os }}-maven-
                ${{ runner.os }}
        - name: Run Tests
          run : mvn test
        - name: Cache local Maven repository
          if: steps.restore-cache.outputs.cache-hit == false
          uses: actions/cache@v3
          with:
            path: ~/.m2/repository
            key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
            restore-keys: |
                ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
                ${{ runner.os }}-maven-
                ${{ runner.os }}


